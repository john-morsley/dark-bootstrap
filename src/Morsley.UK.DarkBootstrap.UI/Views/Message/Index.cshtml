@{
    ViewData["Title"] = "Message - John Morsley";
}

<style>
    .form-control, .form-select {
        background-color: #303030;
        border-color: #444;
        color: #fff;
    }
    
    .form-control:focus, .form-select:focus {
        background-color: #303030;
        border-color: #375a7f;
        color: #fff;
    }
    
    .form-control::placeholder {
        color: #999;
    }
    
    .form-select option {
        background-color: #303030;
        color: #fff;
    }
    
    .input-group .form-select:first-child {
        border-top-left-radius: 0.375rem;
        border-bottom-left-radius: 0.375rem;
    }
    
    /* Show validation feedback for input groups */
    .input-group ~ .valid-feedback,
    .input-group ~ .invalid-feedback {
        display: block;
    }
    
    .input-group ~ .valid-feedback {
        display: none;
    }
    
    .input-group ~ .invalid-feedback {
        display: none;
    }
    
    .input-group:has(.form-control.is-valid) ~ .valid-feedback {
        display: block;
    }
    
    .input-group:has(.form-control.is-invalid) ~ .invalid-feedback {
        display: block;
    }
</style>

<section class="hero-section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1 class="display-4 fw-bold mb-2">Send Message</h1>
                <p class="lead text-muted">Get in touch with John Morsley</p>
            </div>
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="card p-4">

                    @if (ViewData["MessageSent"] is bool sent && sent)
                    {
                        <div class="alert alert-success" role="alert">
                            Your message has been sent.
                        </div>
                    }
                    else
                    {
                        <form asp-controller="Message" asp-action="Send" method="post" class="needs-validation" novalidate>
                            @Html.AntiForgeryToken()

                            <div class="mb-3">
                                <label for="name" class="form-label">Name <span class="text-muted">(required)</span></label>
                                <input type="text" class="form-control" id="name" name="name" required />
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                                <div class="invalid-feedback">
                                    Your name is really gonna help me, without it I don't know who I'm talking to!?
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label">Email Address <span class="text-muted">(optional, but if you want a reply, I'm gonna need an email or a mobile)</span></label>
                                <input type="text" class="form-control" id="email" name="email" />
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                                <div class="invalid-feedback">
                                    Please provide a valid email address (e.g., name@example.com).
                                </div>
                            </div>

                            @{
                                var detectedCode = ViewData["DetectedCountryCode"] as string;
                            }
                            <div class="mb-3">
                                <label class="form-label">Mobile Number <span class="text-muted">(optional, but if you want a reply, I'm gonna need an email or a mobile)</span></label>
                                <div class="input-group">
                                    <select class="form-select" id="countryCode" name="countryCode" style="max-width: 180px;">
                                        <option value="+44" selected="@(detectedCode == "+44")">+44 (UK)</option>
                                        <option value="+1" selected="@(detectedCode == "+1")">+1 (US/Canada)</option>
                                        <option value="+61" selected="@(detectedCode == "+61")">+61 (Australia)</option>
                                        <option value="+64" selected="@(detectedCode == "+64")">+64 (New Zealand)</option>
                                        <option value="+353" selected="@(detectedCode == "+353")">+353 (Ireland)</option>
                                        <option value="+33" selected="@(detectedCode == "+33")">+33 (France)</option>
                                        <option value="+49" selected="@(detectedCode == "+49")">+49 (Germany)</option>
                                        <option value="+34" selected="@(detectedCode == "+34")">+34 (Spain)</option>
                                        <option value="+39" selected="@(detectedCode == "+39")">+39 (Italy)</option>
                                        <option value="+31" selected="@(detectedCode == "+31")">+31 (Netherlands)</option>
                                        <option value="+32" selected="@(detectedCode == "+32")">+32 (Belgium)</option>
                                        <option value="+41" selected="@(detectedCode == "+41")">+41 (Switzerland)</option>
                                        <option value="+46" selected="@(detectedCode == "+46")">+46 (Sweden)</option>
                                        <option value="+47" selected="@(detectedCode == "+47")">+47 (Norway)</option>
                                        <option value="+45" selected="@(detectedCode == "+45")">+45 (Denmark)</option>
                                        <option value="+358" selected="@(detectedCode == "+358")">+358 (Finland)</option>
                                        <option value="+351" selected="@(detectedCode == "+351")">+351 (Portugal)</option>
                                        <option value="+30" selected="@(detectedCode == "+30")">+30 (Greece)</option>
                                        <option value="+48" selected="@(detectedCode == "+48")">+48 (Poland)</option>
                                        <option value="+91" selected="@(detectedCode == "+91")">+91 (India)</option>
                                        <option value="+86" selected="@(detectedCode == "+86")">+86 (China)</option>
                                        <option value="+81" selected="@(detectedCode == "+81")">+81 (Japan)</option>
                                        <option value="+82" selected="@(detectedCode == "+82")">+82 (South Korea)</option>
                                        <option value="+65" selected="@(detectedCode == "+65")">+65 (Singapore)</option>
                                        <option value="+852" selected="@(detectedCode == "+852")">+852 (Hong Kong)</option>
                                        <option value="+27" selected="@(detectedCode == "+27")">+27 (South Africa)</option>
                                        <option value="+55" selected="@(detectedCode == "+55")">+55 (Brazil)</option>
                                        <option value="+52" selected="@(detectedCode == "+52")">+52 (Mexico)</option>
                                        <option value="+54" selected="@(detectedCode == "+54")">+54 (Argentina)</option>
                                    </select>
                                    <input type="tel" class="form-control" id="mobileNumber" name="mobileNumber" />
                                </div>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                                <div class="invalid-feedback">
                                    Please provide a valid phone number for the selected country.
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="message" class="form-label">Message <span class="text-muted">(required)</span></label>
                                <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                                <div class="valid-feedback">
                                    Looks good!
                                </div>
                                <div class="invalid-feedback">
                                    We're gonna need your message, otherwise why are you trying to contact me!?
                                </div>
                            </div>

                            <div class="text-right">
                                <button type="submit" class="btn btn-outline-success btn-sm">Send</button>
                            </div>
                        </form>

                    }
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/validation.js"></script>
}